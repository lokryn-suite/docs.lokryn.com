"use strict";(globalThis.webpackChunkdocs_lokryn_com=globalThis.webpackChunkdocs_lokryn_com||[]).push([[3997],{7854:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"pipe-audit/core/core-contracts","title":"Contracts","description":"Contracts define the rules and expectations for validating data.","source":"@site/docs/pipe-audit/core/contracts.md","sourceDirName":"pipe-audit/core","slug":"/core/contracts","permalink":"/docs/core/contracts","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"core-contracts","title":"Contracts","sidebar_position":4,"slug":"/core/contracts"},"sidebar":"tutorialSidebar","previous":{"title":"Profiles","permalink":"/docs/core/profiles"},"next":{"title":"Modules","permalink":"/docs/core/modules"}}');var i=s(4848),t=s(8453);const o={id:"core-contracts",title:"Contracts",sidebar_position:4,slug:"/core/contracts"},l="Contracts",c={},a=[{value:"Example Contract",id:"example-contract",level:2},{value:"Section Breakdown",id:"section-breakdown",level:2},{value:"[contract]",id:"contract",level:3},{value:"[file]",id:"file",level:3},{value:"[[columns]]",id:"columns",level:3},{value:"[[compound_unique]]",id:"compound_unique",level:3},{value:"[source]",id:"source",level:3},{value:"[destination]",id:"destination",level:3},{value:"[quarantine]",id:"quarantine",level:3}];function d(n){const e={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"contracts",children:"Contracts"})}),"\n",(0,i.jsxs)(e.p,{children:["Contracts define the rules and expectations for validating data.",(0,i.jsx)(e.br,{}),"\n","They are written in TOML and stored in the ",(0,i.jsx)(e.code,{children:"contracts/"})," directory.",(0,i.jsx)(e.br,{}),"\n","Each contract specifies metadata, file\u2011level checks, column\u2011level checks, compound keys, and source/destination locations."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"example-contract",children:"Example Contract"}),"\n",(0,i.jsxs)(e.p,{children:["[contract]",(0,i.jsx)(e.br,{}),"\n",'name = "people"',(0,i.jsx)(e.br,{}),"\n",'version = "0.1.0"',(0,i.jsx)(e.br,{}),"\n",'tags = ["pii", "critical"]']}),"\n",(0,i.jsxs)(e.p,{children:["[file]",(0,i.jsx)(e.br,{}),"\n","validation = [",(0,i.jsx)(e.br,{}),"\n",'{ rule = "row_count", min = 1_500_000, max = 2_000_000 }',(0,i.jsx)(e.br,{}),"\n","]"]}),"\n",(0,i.jsxs)(e.p,{children:["[[columns]]",(0,i.jsx)(e.br,{}),"\n",'name = "person_id"',(0,i.jsx)(e.br,{}),"\n","validation = [",(0,i.jsx)(e.br,{}),"\n",'{ rule = "not_null" },',(0,i.jsx)(e.br,{}),"\n",'{ rule = "unique" },',(0,i.jsx)(e.br,{}),"\n",'{ rule = "pattern", pattern = "^[0-9a-fA-F-]',36,'$" }',(0,i.jsx)(e.br,{}),"\n","]"]}),"\n",(0,i.jsxs)(e.p,{children:["[[columns]]",(0,i.jsx)(e.br,{}),"\n",'name = "age"',(0,i.jsx)(e.br,{}),"\n","validation = [",(0,i.jsx)(e.br,{}),"\n",'{ rule = "range", min = 0, max = 120 },',(0,i.jsx)(e.br,{}),"\n",'{ rule = "outlier_sigma", sigma = 3.0 }',(0,i.jsx)(e.br,{}),"\n","]"]}),"\n",(0,i.jsxs)(e.p,{children:["[[compound_unique]]",(0,i.jsx)(e.br,{}),"\n",'columns = ["household_id", "person_id"]']}),"\n",(0,i.jsxs)(e.p,{children:["[source]",(0,i.jsx)(e.br,{}),"\n",'type = "s3"',(0,i.jsx)(e.br,{}),"\n",'location = "s3://raw/ondoriya/seed_data/people.csv"',(0,i.jsx)(e.br,{}),"\n",'profile = "minio_raw"']}),"\n",(0,i.jsxs)(e.p,{children:["[destination]",(0,i.jsx)(e.br,{}),"\n",'type = "local"',(0,i.jsx)(e.br,{}),"\n",'location = "data/"']}),"\n",(0,i.jsxs)(e.p,{children:["[quarantine]",(0,i.jsx)(e.br,{}),"\n",'type = "gcs"',(0,i.jsx)(e.br,{}),"\n",'location = "',(0,i.jsx)(e.a,{href:"https://storage.cloud.google.com/ondoriya/people.csv",children:"https://storage.cloud.google.com/ondoriya/people.csv"}),'"',(0,i.jsx)(e.br,{}),"\n",'profile = "gcs_test"']}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"section-breakdown",children:"Section Breakdown"}),"\n",(0,i.jsx)(e.h3,{id:"contract",children:"[contract]"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"name"}),": unique identifier for the contract"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"version"}),": semantic version of the contract definition"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"tags"}),": labels for classification (e.g. ",(0,i.jsx)(e.code,{children:"pii"}),", ",(0,i.jsx)(e.code,{children:"critical"}),")"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"file",children:"[file]"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"validation"}),": file\u2011level rules (e.g. row counts, file size)"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"columns",children:"[[columns]]"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"name"}),": column name to validate"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"validation"}),": list of rules applied to this column","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"not_null"})," \u2192 column must not contain nulls"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"unique"})," \u2192 values must be unique"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"pattern"})," \u2192 regex pattern enforcement"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"range"})," \u2192 numeric range enforcement"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"outlier_sigma"})," \u2192 statistical outlier detection"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"compound_unique",children:"[[compound_unique]]"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"columns"}),": enforce uniqueness across multiple columns"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"source",children:"[source]"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"type"}),": provider type (s3, gcs, azure, local, etc.)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"location"}),": path or URI to the source file"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"profile"}),": reference to a profile in ",(0,i.jsx)(e.code,{children:"profiles.toml"})]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"destination",children:"[destination]"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"type"}),": where validated files are written"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"location"}),": local path or remote URI"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"quarantine",children:"[quarantine]"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"type"}),": where invalid files are moved"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"location"}),": quarantine path or URI"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"profile"}),": reference to a profile in ",(0,i.jsx)(e.code,{children:"profiles.toml"})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsxs)(e.p,{children:["\u2705 Contracts combine ",(0,i.jsx)(e.strong,{children:"metadata"}),", ",(0,i.jsx)(e.strong,{children:"rules"}),", and ",(0,i.jsx)(e.strong,{children:"movement logic"}),".",(0,i.jsx)(e.br,{}),"\n","They are the central artifact for defining what \u201cvalid data\u201d means in Pipe Audit."]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>l});var r=s(6540);const i={},t=r.createContext(i);function o(n){const e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);