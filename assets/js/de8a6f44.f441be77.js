"use strict";(globalThis.webpackChunkdocs_lokryn_com=globalThis.webpackChunkdocs_lokryn_com||[]).push([[487],{7931:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"pipe-audit/core/core-contracts","title":"Contracts","description":"Contracts define the rules and expectations for validating data.","source":"@site/docs/pipe-audit/core/core-contracts.md","sourceDirName":"pipe-audit/core","slug":"/pipe-audit/core/contracts","permalink":"/docs/pipe-audit/core/contracts","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"core-contracts","title":"Contracts","sidebar_position":4,"slug":"/pipe-audit/core/contracts"},"sidebar":"docsSidebar","previous":{"title":"Profiles","permalink":"/docs/pipe-audit/core/profiles"},"next":{"title":"Contract Rules","permalink":"/docs/pipe-audit/core/rules"}}');var t=i(4848),s=i(8453);const o={id:"core-contracts",title:"Contracts",sidebar_position:4,slug:"/pipe-audit/core/contracts"},l="Contracts",c={},a=[{value:"Example Contract",id:"example-contract",level:2},{value:"Section Breakdown",id:"section-breakdown",level:2},{value:"[contract]",id:"contract",level:3},{value:"[file]",id:"file",level:3},{value:"[[columns]]",id:"columns",level:3},{value:"[[compound_unique]]",id:"compound_unique",level:3},{value:"[source]",id:"source",level:3},{value:"[destination]",id:"destination",level:3},{value:"[quarantine]",id:"quarantine",level:3}];function d(n){const e={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"contracts",children:"Contracts"})}),"\n",(0,t.jsxs)(e.p,{children:["Contracts define the rules and expectations for validating data.",(0,t.jsx)(e.br,{}),"\n","They are written in TOML and stored in the ",(0,t.jsx)(e.code,{children:"contracts/"})," directory.",(0,t.jsx)(e.br,{}),"\n","Each contract specifies metadata, file-level checks, column-level checks, compound keys, and source/destination locations."]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"example-contract",children:"Example Contract"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-toml",children:'[contract]\nname = "people"\nversion = "0.1.0"\ntags = ["pii", "critical"]\n\n[file]\nvalidation = [\n  { rule = "row_count", min = 1_500_000, max = 2_000_000 }\n]\n\n[[columns]]\nname = "person_id"\nvalidation = [\n  { rule = "not_null" },\n  { rule = "unique" },\n  { rule = "pattern", pattern = "^[0-9a-fA-F-]{36}$" }\n]\n\n[[columns]]\nname = "age"\nvalidation = [\n  { rule = "range", min = 0, max = 120 },\n { rule = "outlier_sigma", sigma = 3.0 }\n]\n\n[[compound_unique]]\ncolumns = ["household_id", "person_id"]\n\n[source]\ntype = "s3"\nlocation = "s3://raw/ondoriya/seed_data/people.csv"\nprofile = "minio_raw"\n\n[destination]\ntype = "local"\nlocation = "data/"\n\n[quarantine]\ntype = "gcs"\nlocation = "[https://storage.cloud.google.com/ondoriya/people.csv](https://storage.cloud.google.com/ondoriya/people.csv)"\nprofile = "gcs_test"\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"section-breakdown",children:"Section Breakdown"}),"\n",(0,t.jsx)(e.h3,{id:"contract",children:"[contract]"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"name"}),": unique identifier for the contract"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"version"}),": semantic version of the contract definition"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"tags"}),": labels for classification (e.g. ",(0,t.jsx)(e.code,{children:"pii"}),", ",(0,t.jsx)(e.code,{children:"critical"}),")"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"file",children:"[file]"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"validation"}),": file-level rules (e.g. row counts, file size)"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"columns",children:"[[columns]]"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"name"}),": column name to validate"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"validation"}),": list of rules applied to this column","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"not_null"})," \u2192 column must not contain nulls"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"unique"})," \u2192 values must be unique"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"pattern"})," \u2192 regex pattern enforcement"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"range"})," \u2192 numeric range enforcement"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"outlier_sigma"})," \u2192 statistical outlier detection"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"compound_unique",children:"[[compound_unique]]"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"columns"}),": enforce uniqueness across multiple columns"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"source",children:"[source]"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"type"}),": provider type (s3, gcs, azure, local, etc.)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"location"}),": path or URI to the source file"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"profile"}),": reference to a profile in ",(0,t.jsx)(e.code,{children:"profiles.toml"})]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"destination",children:"[destination]"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"type"}),": where validated files are written"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"location"}),": local path or remote URI"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"quarantine",children:"[quarantine]"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"type"}),": where invalid files are moved"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"location"}),": quarantine path or URI"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"profile"}),": reference to a profile in ",(0,t.jsx)(e.code,{children:"profiles.toml"})]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsxs)(e.p,{children:["\u2705 Contracts combine ",(0,t.jsx)(e.strong,{children:"metadata"}),", ",(0,t.jsx)(e.strong,{children:"rules"}),", and ",(0,t.jsx)(e.strong,{children:"movement logic"}),".",(0,t.jsx)(e.br,{}),"\n","They are the central artifact for defining what \u201cvalid data\u201d means in Pipe Audit."]})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>l});var r=i(6540);const t={},s=r.createContext(t);function o(n){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);