"use strict";(globalThis.webpackChunkdocs_lokryn_com=globalThis.webpackChunkdocs_lokryn_com||[]).push([[185],{7330:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"pipe-audit/core/core-rules","title":"Contract Rules","description":"Contracts use validation entries to apply rules at the file, column, or compound level.","source":"@site/docs/pipe-audit/core/core-rules.md","sourceDirName":"pipe-audit/core","slug":"/pipe-audit/core/rules","permalink":"/docs/pipe-audit/core/rules","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"core-rules","title":"Contract Rules","sidebar_position":5,"slug":"/pipe-audit/core/rules"},"sidebar":"docsSidebar","previous":{"title":"Contracts","permalink":"/docs/pipe-audit/core/contracts"},"next":{"title":"Logs & Quarantine","permalink":"/docs/pipe-audit/core/logs-quarantine"}}');var r=l(4848),i=l(8453);const a={id:"core-rules",title:"Contract Rules",sidebar_position:5,slug:"/pipe-audit/core/rules"},o="Contract Rules",t={},c=[{value:"File-Level Rules",id:"file-level-rules",level:2},{value:"Column-Level Rules",id:"column-level-rules",level:2},{value:"Compound Rules",id:"compound-rules",level:2}];function d(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"contract-rules",children:"Contract Rules"})}),"\n",(0,r.jsxs)(n.p,{children:["Contracts use ",(0,r.jsx)(n.code,{children:"validation"})," entries to apply rules at the ",(0,r.jsx)(n.strong,{children:"file"}),", ",(0,r.jsx)(n.strong,{children:"column"}),", or ",(0,r.jsx)(n.strong,{children:"compound"})," level.",(0,r.jsx)(n.br,{}),"\n","This page lists all available rules with TOML examples."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"file-level-rules",children:"File-Level Rules"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"completeness"})," Check overall completeness of the file (e.g., proportion of non-null cells)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[file]\nvalidation = [\n  { rule = "completeness", min = 0.95 }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"row_count"})," Require the file to have a row count within a range."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[file]\nvalidation = [\n  { rule = "row_count", min = 1000, max = 5000 }\n]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"column-level-rules",children:"Column-Level Rules"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"boolean"})," Ensure values are boolean-like (",(0,r.jsx)(n.code,{children:"true"}),"/",(0,r.jsx)(n.code,{children:"false"}),")."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "is_active"\nvalidation = [\n  { rule = "boolean" }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"completeness"})," Check completeness ratio for a column."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "email"\nvalidation = [\n  { rule = "completeness", min = 0.99 }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"date_format"})," Require values to match a date format."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "signup_date"\nvalidation = [\n  { rule = "date_format", format = "%Y-%m-%d" }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"distinctness"})," Check distinctness ratio of a column."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "country"\nvalidation = [\n  { rule = "distinctness", min = 0.1, max = 0.5 }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"in_set"})," Restrict values to a whitelist."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "status"\nvalidation = [\n  { rule = "in_set", values = ["active", "inactive", "pending"] }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"not_in_set"})," Fail if values appear in a blacklist."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "status"\nvalidation = [\n  { rule = "not_in_set", values = ["error", "unknown"] }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"max_length"})," Enforce maximum string length."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "username"\nvalidation = [\n  { rule = "max_length", length = 32 }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"mean_between"})," Require column mean within a range."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "age"\nvalidation = [\n  { rule = "mean_between", min = 18, max = 65 }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"stdev_between"})," Require column standard deviation within a range."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "salary"\nvalidation = [\n  { rule = "stdev_between", min = 1000, max = 5000 }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"not_null"})," Disallow null or empty values."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "person_id"\nvalidation = [\n  { rule = "not_null" }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"outlier_sigma"})," Flag values outside N standard deviations."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "height"\nvalidation = [\n  { rule = "outlier_sigma", sigma = 3.0 }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"pattern"})," Require values to match a regex."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "uuid"\nvalidation = [\n  { rule = "pattern", pattern = "^[0-9a-fA-F-]{36}$" }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"range"})," Require numeric values within [min, max]."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "score"\nvalidation = [\n  { rule = "range", min = 0, max = 100 }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"type_validator"})," Enforce a declared type (e.g., integer, float, string)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "age"\nvalidation = [\n  { rule = "type_validator", type = "integer" }\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"unique"})," Require values in the column to be unique."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[columns]]\nname = "email"\nvalidation = [\n  { rule = "unique" }\n]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"compound-rules",children:"Compound Rules"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"unique"})," Enforce uniqueness across multiple columns."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[compound_unique]]\ncolumns = ["household_id", "person_id"]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 Place rules under ",(0,r.jsx)(n.code,{children:"[file]"}),", ",(0,r.jsx)(n.code,{children:"[[columns]]"}),", or ",(0,r.jsx)(n.code,{children:"[[compound_unique]]"})," depending on scope.",(0,r.jsx)(n.br,{}),"\n","Rules can be combined within the same section."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>a,x:()=>o});var s=l(6540);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);